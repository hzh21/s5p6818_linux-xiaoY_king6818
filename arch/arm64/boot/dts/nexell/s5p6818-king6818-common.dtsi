/*
 * (C) Copyright 2017 FriendlyElec Computer Tech. Co., Ltd.
 * Adapted for Rongpin King6818 - 2026
 */

/memreserve/ 0x7de00000 0x00100000; /* OP-TEE SHM */
#include <dt-bindings/interrupt-controller/irq.h>
#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/input/input.h>
#include "s5p6818.dtsi"

#define PMIC_PDATA_INIT(_id, _rname, _minuv, _maxuv,	\
						_always_on, _boot_on, _init_uv,	\
						_init_enable, _slp_slots)		\
		regulator-name = _rname;			\
		regulator-min-microvolt = <_minuv>;	\
		regulator-max-microvolt = <_maxuv>;	\
		nx,id = <_id>;						\
		nx,always_on = <_always_on>;		\
		nx,boot_on = <_boot_on>;			\
		nx,init_enable = <_init_enable>;	\
		nx,init_uV = <_init_uv>;			\
		nx,sleep_slots = <_slp_slots>;

/ {
	model = "Rongpin King6818 Board";
	compatible = "rongpin,king6818", "nexell,s5p6818";

	memory {
		device_type = "memory";
		reg = <0x40000000 0x3db00000>;
	};

	aliases {
		ethernet0 = &gmac0;
		i2c3 = &i2c_3;
	};

	soc {
		#include "s5p6818-pinctrl.dtsi"

		clocks {
			uart0:uart@c00a9000 { clock-frequency = <147500000>; };
			serial0:serial@c00a1000 { status ="okay"; };
			i2c_3: i2c@c00a7000 {
				compatible = "nexell,s5p6818-i2c";
				reg = <0xc00a7000 0x100>;
				interrupts = <0 47 0>;
				clock-names = "i2c";
				clocks = <&pclk>;
				status = "okay";
			};
		};

		pinctrl@c0010000 {
			i2c3_pins: i2c3-pins {
				nexell,pins = "gpioc-15", "gpioc-16";
				nexell,pin-function = <1>;
				nexell,pin-pull = <2>;
				nexell,pin-strength = <0>;
			};
		};

		dw_mmc_2:dw_mmc@c0069000 {
			bus-width = <4>;
			cap-mmc-highspeed;
			non-removable;
			status = "okay";
		};

		dw_mmc_0:dw_mmc@c0062000 {
			bus-width = <4>;
			cap-sd-highspeed;
			cd-gpios = <&alive_0 1 0>;
			status = "okay";
		};

		gmac0:ethernet@c0060000 {
			pinctrl-0 = <&gmac_pins>;
			status = "okay";
			snps,phy-addr = <3>;
			mdio {
				#address-cells = <1>;
				#size-cells = <0>;
				ethernet_phy: ethernet-phy@3 { reg = <3>; };
			};
		};
	};
};

/* 在根节点外追加 AXP228 逻辑 */
&i2c_3 {
	status = "okay";
	samsung,i2c-max-bus-freq = <100000>;
	#address-cells = <1>;
	#size-cells = <0>;

	axp228@34 {
		compatible = "x-powers,axp228";
		reg = <0x34>;
		status = "okay";

		regulators {
			vdd_arm: axp22_dcdc2 {
				regulator-name = "vdd_arm";
				regulator-min-microvolt = <600000>;
				regulator-max-microvolt = <1540000>;
				regulator-always-on;
				regulator-boot-on;
			};
		};
	};
};
