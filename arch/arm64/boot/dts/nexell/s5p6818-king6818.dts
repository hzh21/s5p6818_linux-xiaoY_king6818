/dts-v1/;
#include "s5p6818-king6818-common.dtsi"

/ {
    model = "Rongpin King6818 Board";
    compatible = "rongpin,king6818", "nexell,s5p6818";

    aliases {
        i2c3 = &i2c_3;
        ethernet0 = &gmac0;
    };

    /* 修正：通过绝对路径访问 soc 节点 */
    soc {
        i2c_3: i2c@c00a7000 {
            compatible = "nexell,s5p6818-i2c";
            reg = <0xc00a7000 0x100>;
            interrupts = <0 47 0>;
            clock-names = "i2c";
            clocks = <&pclk>;
            status = "okay";

            axp228@34 {
                compatible = "x-powers,axp228";
                reg = <0x34>;
                status = "okay";
                regulators {
                    VCC1P1_ARM_PMIC: axp22_dcdc2 {
                        regulator-name = "axp228_1p1_arm";
                        regulator-min-microvolt = <600000>;
                        regulator-max-microvolt = <1540000>;
                        regulator-always-on;
                        regulator-boot-on;
                    };
                };
            };
        };
    };

    /* 删除冲突节点 */
    /delete-node/ onewire_pwm;
};

/* 修复网卡 */
&gmac0 {
    status = "okay";
    snps,phy-addr = <3>;
    mdio {
        #address-cells = <1>;
        #size-cells = <0>;
        ethernet_phy: ethernet-phy@3 {
            reg = <3>;
        };
    };
};

/* 修复引脚控制：注意这里使用别名 pinctrl0 */
&pinctrl0 {
    i2c3_pins: i2c3-pins {
        nexell,pins = "gpioc-15", "gpioc-16";
        nexell,pin-function = <1>;
        nexell,pin-pull = <2>;
    };
};
